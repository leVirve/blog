<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Dcard çˆ¬èŸ²æ–¼ Python å¯¦ä½œæˆæœï¼šdcard-spider | Salas&#39;</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ä¸Šæ¬¡è«‡åˆ°äº† Dcard ç¾åœ¨å®˜æ–¹å¯¦éš› production ä¸­ä½¿ç”¨çš„ API URL è¦å‰‡ï¼Œä¸¦ä¸”æ’°å¯«äº†ç°¡å–®çš„ Python scripts ä¾†å–å¾—å°éƒ¨åˆ†è³‡æ–™ã€‚è€Œé€™æ¨£çš„æˆæœé©åˆç”¨ä¾†åšå°è¦æ¨¡çš„å¾ŒçºŒæ‡‰ç”¨ï¼Œä¾‹å¦‚ç‰¹å®šç‰ˆçš„ç•¶æ—¥æˆ–ç•¶æœˆæ–‡ç« åˆ†æç­‰ç­‰ï¼›ç„¶è€Œè‹¥æ˜¯è¦æ‹¿ä¸‹å…¨ç«™çš„è³‡æ–™ï¼Œé‚£éº¼æˆ‘å€‘ä¸Šæ¬¡çš„ç¨‹å¼ç¯„ä¾‹æœ¬èº«å¿…é ˆè¦æ”¹å–„ä¾†è®“å¾ŒçºŒæ–¹ä¾¿æ“´å……ï¼ˆå…¶å¯¦æ˜¯ä¸Šæ¬¡ç¨‹å¼è¶•å·¥å¯«å¤ªé†œï¼Œç”Ÿç†ä¸Šä¸èƒ½æ¥å—(?) å®Œå…¨æ²’æœ‰æƒ³è¦ç›´æ¥æ²¿ç”¨çš„å¿µé ­ XDï¼‰ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Dcard çˆ¬èŸ²æ–¼ Python å¯¦ä½œæˆæœï¼šdcard-spider">
<meta property="og:url" content="https://levirve.github.io/2016/dcard-spider-python-package/index.html">
<meta property="og:site_name" content="Salas'">
<meta property="og:description" content="ä¸Šæ¬¡è«‡åˆ°äº† Dcard ç¾åœ¨å®˜æ–¹å¯¦éš› production ä¸­ä½¿ç”¨çš„ API URL è¦å‰‡ï¼Œä¸¦ä¸”æ’°å¯«äº†ç°¡å–®çš„ Python scripts ä¾†å–å¾—å°éƒ¨åˆ†è³‡æ–™ã€‚è€Œé€™æ¨£çš„æˆæœé©åˆç”¨ä¾†åšå°è¦æ¨¡çš„å¾ŒçºŒæ‡‰ç”¨ï¼Œä¾‹å¦‚ç‰¹å®šç‰ˆçš„ç•¶æ—¥æˆ–ç•¶æœˆæ–‡ç« åˆ†æç­‰ç­‰ï¼›ç„¶è€Œè‹¥æ˜¯è¦æ‹¿ä¸‹å…¨ç«™çš„è³‡æ–™ï¼Œé‚£éº¼æˆ‘å€‘ä¸Šæ¬¡çš„ç¨‹å¼ç¯„ä¾‹æœ¬èº«å¿…é ˆè¦æ”¹å–„ä¾†è®“å¾ŒçºŒæ–¹ä¾¿æ“´å……ï¼ˆå…¶å¯¦æ˜¯ä¸Šæ¬¡ç¨‹å¼è¶•å·¥å¯«å¤ªé†œï¼Œç”Ÿç†ä¸Šä¸èƒ½æ¥å—(?) å®Œå…¨æ²’æœ‰æƒ³è¦ç›´æ¥æ²¿ç”¨çš„å¿µé ­ XDï¼‰ã€‚">
<meta property="og:image" content="https://levirve.github.io/2016/dcard-spider-python-package/Giant_spider_strikes.jpg">
<meta property="og:image" content="https://levirve.github.io/2016/dcard-spider-python-package/snapshot.png">
<meta property="og:updated_time" content="2016-08-16T03:33:40.910Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Dcard çˆ¬èŸ²æ–¼ Python å¯¦ä½œæˆæœï¼šdcard-spider">
<meta name="twitter:description" content="ä¸Šæ¬¡è«‡åˆ°äº† Dcard ç¾åœ¨å®˜æ–¹å¯¦éš› production ä¸­ä½¿ç”¨çš„ API URL è¦å‰‡ï¼Œä¸¦ä¸”æ’°å¯«äº†ç°¡å–®çš„ Python scripts ä¾†å–å¾—å°éƒ¨åˆ†è³‡æ–™ã€‚è€Œé€™æ¨£çš„æˆæœé©åˆç”¨ä¾†åšå°è¦æ¨¡çš„å¾ŒçºŒæ‡‰ç”¨ï¼Œä¾‹å¦‚ç‰¹å®šç‰ˆçš„ç•¶æ—¥æˆ–ç•¶æœˆæ–‡ç« åˆ†æç­‰ç­‰ï¼›ç„¶è€Œè‹¥æ˜¯è¦æ‹¿ä¸‹å…¨ç«™çš„è³‡æ–™ï¼Œé‚£éº¼æˆ‘å€‘ä¸Šæ¬¡çš„ç¨‹å¼ç¯„ä¾‹æœ¬èº«å¿…é ˆè¦æ”¹å–„ä¾†è®“å¾ŒçºŒæ–¹ä¾¿æ“´å……ï¼ˆå…¶å¯¦æ˜¯ä¸Šæ¬¡ç¨‹å¼è¶•å·¥å¯«å¤ªé†œï¼Œç”Ÿç†ä¸Šä¸èƒ½æ¥å—(?) å®Œå…¨æ²’æœ‰æƒ³è¦ç›´æ¥æ²¿ç”¨çš„å¿µé ­ XDï¼‰ã€‚">
  
    <link rel="alternate" href="/atom.xml" title="Salas&#39;" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Salas&#39;</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Do it for your pride.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="æœå°‹"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://levirve.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-dcard-spider-python-package" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/dcard-spider-python-package/" class="article-date">
  <time datetime="2016-07-30T09:24:44.000Z" itemprop="datePublished">2016-07-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Dcard çˆ¬èŸ²æ–¼ Python å¯¦ä½œæˆæœï¼šdcard-spider
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ä¸Šæ¬¡è«‡åˆ°äº† Dcard ç¾åœ¨å®˜æ–¹å¯¦éš› production ä¸­ä½¿ç”¨çš„ API URL è¦å‰‡ï¼Œä¸¦ä¸”æ’°å¯«äº†ç°¡å–®çš„ Python scripts ä¾†å–å¾—å°éƒ¨åˆ†è³‡æ–™ã€‚<br>è€Œé€™æ¨£çš„æˆæœé©åˆç”¨ä¾†åšå°è¦æ¨¡çš„å¾ŒçºŒæ‡‰ç”¨ï¼Œä¾‹å¦‚ç‰¹å®šç‰ˆçš„ç•¶æ—¥æˆ–ç•¶æœˆæ–‡ç« åˆ†æç­‰ç­‰ï¼›ç„¶è€Œè‹¥æ˜¯è¦æ‹¿ä¸‹å…¨ç«™çš„è³‡æ–™ï¼Œé‚£éº¼æˆ‘å€‘ä¸Šæ¬¡çš„ç¨‹å¼ç¯„ä¾‹æœ¬èº«å¿…é ˆè¦æ”¹å–„ä¾†è®“å¾ŒçºŒæ–¹ä¾¿æ“´å……ï¼ˆå…¶å¯¦æ˜¯ä¸Šæ¬¡ç¨‹å¼è¶•å·¥å¯«å¤ªé†œï¼Œç”Ÿç†ä¸Šä¸èƒ½æ¥å—(?) å®Œå…¨æ²’æœ‰æƒ³è¦ç›´æ¥æ²¿ç”¨çš„å¿µé ­ XDï¼‰ã€‚</p>
<p>é‚£éº¼æ¥ä¸‹ä¾†çš„æ¦‚å¿µå°±æ˜¯ï¼š</p>
<ol>
<li><p>æˆ‘è¦ä¸€éš»å¤§èœ˜è››ï¼ˆæ¯”èµ· crawlerï¼Œæˆ‘é¸æ“‡ Spiderï¼è½èµ·ä¾†å°±æ¯”è¼ƒçŒ›ï¼Œä»¥ä¸‹éƒ½ç”¨ spider ç¨±å‘¼é€™éš»ç¶²è·¯çˆ¬èŸ² é¡†é¡†ï¼‰</p>
<img src="/2016/dcard-spider-python-package/Giant_spider_strikes.jpg" alt="[Giant spider strikes from wiki]" title="[Giant spider strikes from wiki]">
</li>
<li><p>é‚£é™¤äº†æ ¸å¿ƒçš„è»€å¹¹ä¹‹å¤–éœ€è¦å…ˆé€ å…«éš» <del>èŸ¹</del> è…³å•Šï¼ä¸Šæ¬¡é‚£å€‹å“è³ªï¼ï¼ï¼å¯æ˜¯æ’ä¸èµ·é€™éš»å·¨å‹èœ˜è››çš„</p>
</li>
<li><p>ä¸çŸ¥æ‰€äº‘ï¼Œç¸½ä¹‹å°±æ˜¯æŠŠä¹‹å‰çš„æ¦‚å¿µæ‰“é€ æˆå¥½ç”¨çš„è…¿å°±å°äº†ã€‚ä¹‹å¾Œèœ˜è››å¥½è¾¦äº‹ï¼</p>
</li>
</ol>
<p>æˆæœå·²ç¶“ç™¼å¸ƒåœ¨ <a href="https://pypi.python.org/pypi/dcard-spider" target="_blank" rel="external">PyPI</a> ä»¥åŠ <a href="https://github.com/leVirve/dcard-spider" target="_blank" rel="external">Github</a> ä¸Šäº†ã€‚</p>
<a id="more"></a>
<h2 id="u61F6_u4EBA_u5305_uFF0C_u6211_u5C31_u5148_u5B89_u88DD_u518D_u8AAA"><a href="#u61F6_u4EBA_u5305_uFF0C_u6211_u5C31_u5148_u5B89_u88DD_u518D_u8AAA" class="headerlink" title="æ‡¶äººåŒ…ï¼Œæˆ‘å°±å…ˆå®‰è£å†èªª"></a>æ‡¶äººåŒ…ï¼Œæˆ‘å°±å…ˆå®‰è£å†èªª</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install dcard-spider</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ <a href="https://pypi.python.org/pypi/dcard-spider" target="_blank" rel="external">dcard-spdier@PyPi</a> ä¸ä¿è­‰æœ‰ä»¥ä¸‹èªªçš„æœ€æ–°åŠŸèƒ½å”·ï¼Œå› ç‚ºæ²’æœ‰éš¨æ™‚ç™¼å¸ƒæœ€æ–°çš„ä¸Šå» XDD</p>
<h2 id="u61F6_u4EBA_u5305_uFF0C_u6211_u5C31_u52E4_u52DE_u4E00_u9EDE_u5230_Github__u88DD_u65B0_u7248"><a href="#u61F6_u4EBA_u5305_uFF0C_u6211_u5C31_u52E4_u52DE_u4E00_u9EDE_u5230_Github__u88DD_u65B0_u7248" class="headerlink" title="æ‡¶äººåŒ…ï¼Œæˆ‘å°±å‹¤å‹ä¸€é»åˆ° Github è£æ–°ç‰ˆ"></a>æ‡¶äººåŒ…ï¼Œæˆ‘å°±å‹¤å‹ä¸€é»åˆ° Github è£æ–°ç‰ˆ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/leVirve/dcard-spider</span><br><span class="line">python setup.py install</span><br></pre></td></tr></table></figure>
<p>è£å¥½ä¹‹å¾Œï¼Œå¯ä»¥å…ˆç…§è‘— README è£¡çš„ <code>command line</code> è©¦è©¦ä¸‹è¼‰åœ–ç‰‡åŠŸèƒ½ï¼Œæˆ–æ˜¯ç”¨ <code>program</code> è·‘ sample çœ‹çœ‹æ•ˆæœå¦‚ä½•ã€‚é‚£éº¼ä»¥ä¸‹åˆ†äº«æˆ‘çš„ Python packageï¼ˆå¥—ä»¶ï¼‰ç¨‹å¼æ¶æ§‹ï¼š</p>
<h2 id="u7A0B_u5F0F_u78BC"><a href="#u7A0B_u5F0F_u78BC" class="headerlink" title="ç¨‹å¼ç¢¼"></a>ç¨‹å¼ç¢¼</h2><p>å…ˆå®šç¾©ä¸€å€‹ <code>Dcard</code> é¡åˆ¥ä¾†æè¿°æ•´å€‹å¥—ä»¶æ‡‰è©²æœ‰çš„å­åŠŸèƒ½ï¼Œä¾‹å¦‚ç›®å‰æ”¯æ´ <code>forums</code> è·Ÿ <code>posts</code> å…©å€‹ APIï¼Œæ‰€ä»¥æˆ‘å®šç¾©äº†å…©å€‹å­é¡åˆ¥è² è²¬å„è‡ªåŠŸèƒ½ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""" dcard.py """</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> dcard.forums <span class="keyword">import</span> Forum</span><br><span class="line"><span class="keyword">from</span> dcard.posts <span class="keyword">import</span> Post</span><br><span class="line"><span class="keyword">from</span> dcard.utils <span class="keyword">import</span> Client</span><br><span class="line"></span><br><span class="line">__all__ = [<span class="string">'Dcard'</span>]</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dcard</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(workers=<span class="number">8</span>)</span>:</span></span><br><span class="line">        self.client = Client(workers=workers)</span><br><span class="line">        self.forums = Forum(client=self.client)</span><br><span class="line">        self.posts = Post(client=self.client)</span><br></pre></td></tr></table></figure>
<h3 id="u770B_u677F_u6587_u7AE0_u76F8_u95DC_u8CC7_u8A0A__28Forum-layer_29"><a href="#u770B_u677F_u6587_u7AE0_u76F8_u95DC_u8CC7_u8A0A__28Forum-layer_29" class="headerlink" title="çœ‹æ¿æ–‡ç« ç›¸é—œè³‡è¨Š (Forum-layer)"></a>çœ‹æ¿æ–‡ç« ç›¸é—œè³‡è¨Š (Forum-layer)</h3><ul>
<li><p>åœ¨ <code>Forum</code> ä¸­ä¸»è¦æœ‰å…©å€‹å°å¤–ï¼ˆä½œç‚ºå¥—ä»¶æä¾›çµ¦å¤–éƒ¨å‘¼å«ï¼‰çš„æ–¹æ³•</p>
<ol>
<li><p><code>get()</code> ä½œç‚ºå¯¦ä¾‹æ–¹æ³• (instance method)</p>
<ul>
<li><p>ç”¨ä¾†å–å¾— <code>Dcard</code> ä¸Šå„å€‹çœ‹æ¿çš„å¾Œè¨­è³‡è¨Š (metadata)ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">metadata_forums = dcard.forums.get()</span><br></pre></td></tr></table></figure>
</li>
<li><p>API å–å¾—çš„çµæœæ˜¯ <code>json</code> çš„ listï¼ŒåŸå§‹è³‡æ–™å¤§æ¦‚é•·é€™æ¨£ï¼šï¼ˆä½†åœ¨ç¨‹å¼è£¡å°±è®Šæˆ list of <code>dict</code>ï¼‰</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  ...,</span><br><span class="line">  &#123;</span><br><span class="line">    "<span class="attribute">id</span>": <span class="value"><span class="string">"c82dae3f-28ba-4aae-961d-c754e6ccd37a"</span></span>,</span><br><span class="line">    "<span class="attribute">name</span>": <span class="value"><span class="string">"æ‰‹ä½œ"</span></span>,</span><br><span class="line">    "<span class="attribute">description</span>": <span class="value"><span class="string">"ä¾›è¨è«–ã€åˆ†äº«ã€è©¢å•å„ç¨®æ‰‹ä½œã€éæ–‡å­—å‰µä½œå“ï¼Œéç›¸é—œè©±é¡Œæœƒåˆªé™¤è©²æ–‡"</span></span>,</span><br><span class="line">    "<span class="attribute">alias</span>": <span class="value"><span class="string">"handicrafts"</span></span>,</span><br><span class="line">    "<span class="attribute">fullyAnonymous</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">    "<span class="attribute">subscriptionCount</span>": <span class="value"><span class="number">2893</span></span>,</span><br><span class="line">    "<span class="attribute">invisible</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">    "<span class="attribute">isSchool</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">    "<span class="attribute">read</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">    "<span class="attribute">subscribed</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">    "<span class="attribute">ignorePost</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">    "<span class="attribute">canPost</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">    "<span class="attribute">createdAt</span>": <span class="value"><span class="string">"2016-05-17T11:15:15.714Z"</span></span>,</span><br><span class="line">    "<span class="attribute">updatedAt</span>": <span class="value"><span class="string">"2016-07-15T10:50:49.208Z"</span></span><br><span class="line">  </span>&#125;, ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ‰æä¾›åƒæ•¸ <code>no_school</code> èª¿æ•´è¦ä¸è¦å­¸æ ¡çœ‹æ¿çš„è³‡è¨Šï¼Œå¾ä¸Šé¢çš„ <code>json</code> æ ¼å¼çœ‹å¾—å‡º <code>isSchool</code> çµ¦æˆ‘å€‘è¶³å¤ çš„è¨Šæ¯ä¾†åˆ¤æ–·</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">metadata_forums = dcard.forums.get()  <span class="comment"># å–å¾—æ‰€æœ‰çœ‹æ¿</span></span><br><span class="line">metadata_forums = dcard.forums.get(no_school=<span class="keyword">True</span>)  <span class="comment"># éæ¿¾æ‰å­¸æ ¡çœ‹æ¿</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>get_metas()</code> æ˜¯å¯¦ä¾‹æ–¹æ³• (instance method)</p>
<ul>
<li><p>ç”¨ä¾†å–å¾—å„ç¯‡æ–‡ç« çš„å¾Œè¨­è³‡è¨Š (metadata)ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">forum = dcard.forums(<span class="string">'funny'</span>)</span><br><span class="line">forum.get_metas()</span><br></pre></td></tr></table></figure>
</li>
<li><p>API å–å¾—çš„çµæœåŒæ¨£æ˜¯ <code>json</code> çš„ listï¼ŒåŸå§‹è³‡æ–™å¤§æ¦‚é•·é€™æ¨£ï¼šï¼ˆç¨‹å¼è£¡å°±æ˜¯ list of <code>dict</code>ï¼‰</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  ...</span><br><span class="line">  &#123;</span><br><span class="line">    "<span class="attribute">tags</span>": <span class="value">[<span class="string">"è€çˆ¸"</span>, <span class="string">"ä¸‰æœ¬"</span>, <span class="string">"ç½µäºº"</span>]</span>,</span><br><span class="line">    "<span class="attribute">title</span>": <span class="value"><span class="string">"è€çˆ¸ï¼Œä¸æ˜¯é€™æ¨£çš„å§ï¼ğŸ˜‚"</span></span>,</span><br><span class="line">    "<span class="attribute">forumName</span>": <span class="value"><span class="string">"æœ‰è¶£"</span></span>,</span><br><span class="line">    "<span class="attribute">anonymousSchool</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">    "<span class="attribute">forumAlias</span>": <span class="value"><span class="string">"funny"</span></span>,</span><br><span class="line">    "<span class="attribute">createdAt</span>": <span class="value"><span class="string">"2016-07-15T10:57:02.876Z"</span></span>,</span><br><span class="line">    "<span class="attribute">school</span>": <span class="value"><span class="string">"ä¸­å±±å¤§å­¸"</span></span>,</span><br><span class="line">    "<span class="attribute">commentCount</span>": <span class="value"><span class="number">0</span></span>,</span><br><span class="line">    "<span class="attribute">updatedAt</span>": <span class="value"><span class="string">"2016-07-15T10:57:02.876Z"</span></span>,</span><br><span class="line">    "<span class="attribute">forumId</span>": <span class="value"><span class="string">"a1aaa6e6-2594-4968-b7dc-e1b14bea96f4"</span></span>,</span><br><span class="line">    "<span class="attribute">likeCount</span>": <span class="value"><span class="number">0</span></span>,</span><br><span class="line">    "<span class="attribute">excerpt</span>": <span class="value"><span class="string">"é›–ç„¶å®¶åœ¨é«˜é›„ä½†ç”±æ–¼ä¸‹å­¸æœŸæ¯”è¼ƒå¿™æ‰€ä»¥ä¹Ÿå¾ˆå°‘å›å®¶\nï¼ˆé€™å¥½åƒä¸æ˜¯é‡é»ğŸ˜‚ï¼‰\n-\næ”¾æš‘å‡å¾Œç•¶ç„¶æ²’äº‹å°±è¶•ç·Šå›å®¶å•¦ï¼\nå‰å¹¾å¤©çœ‹åˆ°è€çˆ¸åœ¨çœ‹é›»è¦–ï¼Œçªç„¶è½åˆ°ä¸€é™£å¤§ç¬‘\nã€Œå“ˆå“ˆå“ˆå“ˆï¼Œäº”åå…­å•Šï¼Œå“ˆå“ˆå“ˆå“ˆã€\n-\næˆ‘å¿ƒè£¡æƒ³ï¼Œè›¤äº”"</span></span>,</span><br><span class="line">    "<span class="attribute">id</span>": <span class="value"><span class="number">224362465</span></span>,</span><br><span class="line">    "<span class="attribute">anonymousDepartment</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">    "<span class="attribute">pinned</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">    "<span class="attribute">department</span>": <span class="value"><span class="string">"ä¼æ¥­ç®¡ç†å­¸ç³»"</span></span>,</span><br><span class="line">    "<span class="attribute">replyId</span>": <span class="value"><span class="literal">null</span></span>,</span><br><span class="line">    "<span class="attribute">gender</span>": <span class="value"><span class="string">"M"</span></span>,</span><br><span class="line">    "<span class="attribute">replyTitle</span>": <span class="value"><span class="literal">null</span></span><br><span class="line">  </span>&#125;, ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>æä¾›è±å¯Œçš„åƒæ•¸èª¿æ§ï¼Œè®“ä¹‹å¾Œçš„å°ˆæ¡ˆé–‹ç™¼æ›´ä¾¿åˆ©ï¼ˆä¹‹å¾Œçš„ <code>dcard-lumberjack</code> å°ˆæ¡ˆå¤§é‡ä½¿ç”¨æ­¤æ–¹æ³•çš„åƒæ•¸è¨­å®šï¼‰ã€‚</p>
<ul>
<li><code>num</code>: å–å¾—å¹¾ç¯‡çš„æ–‡ç« å¾Œè¨­è³‡è¨Š (metadata of post)ã€‚ / é è¨­: 30ç¯‡</li>
<li><code>sort</code>: <code>popular</code> / <code>new</code>ï¼Œæ±ºå®šç”¨ä»€éº¼æ’åºæ–¹æ³•æŸ¥è©¢ (sorted by)ï¼Œæœ€æ–°æˆ–æœ€ç†±é–€æ’åºã€‚ / é è¨­: <code>&#39;new&#39;</code></li>
<li><code>timebound</code>: <code>&#39;{ISO-8601 æ™‚é–“å­—ä¸²}&#39;</code>ï¼Œè‹¥ç”¨ <code>new</code> ä¾†æ’åºæŸ¥è©¢çš„è©±ï¼Œè¦æŸ¥è©¢åˆ°å¤šæ—©ã€‚ï¼ˆä½¿ç”¨ UTC æ™‚é–“ï¼Œä¾ç…§<a href="https://zh.wikipedia.org/wiki/ISO_8601" target="_blank" rel="external">ISO-8601</a>è¡¨ç¤ºæ³•è½‰æˆå­—ä¸²ï¼‰ / é è¨­: <code>&#39;&#39;</code>ï¼ˆç©ºå­—ä¸²ï¼‰</li>
<li><code>callback</code>: ä¸ç›´æ¥å›å‚³ metasï¼Œæœƒå…ˆå¥—ç”¨æ­¤å‡½å¼å†å›å‚³ <code>callback_function</code> çš„æœ€çµ‚å€¼ï¼Œå¯ç•¶ä½œä¸€ç¨® reducerï¼Œæ¸›å°‘è³‡æ–™è¤‡é›œåº¦ã€‚ / é è¨­: None<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">''' example scenarios '''</span></span><br><span class="line">forum = Forum(<span class="string">'studyabroad'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. å–å¾—çœ‹æ¿ç†±é–€ 500 ç¯‡            </span></span><br><span class="line">metas = forum.get_metas(num=<span class="number">500</span>, sort=<span class="string">'popular'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å–å¾—çœ‹æ¿è¿‘ 1000 ç¯‡ä¸­ï¼ŒlikeCount å¤ å¤šçš„</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> ä¿ç•™å¾ˆå¤šè®šçš„æ–‡ç« <span class="params">(metas)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> [meta <span class="keyword">for</span> meta <span class="keyword">in</span> metas <span class="keyword">if</span> meta[<span class="string">'likeCount'</span>] &gt;= <span class="number">50</span>]</span><br><span class="line">metas = forum.get_metas(num=<span class="number">1000</span>, callback=ä¿ç•™å¾ˆå¤šè®šçš„æ–‡ç« )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å–å¾— ç„¡é™å¤šç¯‡ æ–‡ç« è³‡è¨Šï¼Œç›´åˆ°è©²æ¿ç„¡æ–‡ç« </span></span><br><span class="line">metas = forum.get_metas(num=forums.infinite_page)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. å–å¾—æ—¥æœŸåœ¨ æœ€è¿‘ä¸‰å€‹æœˆ çš„æ–‡ç« è³‡è¨Š</span></span><br><span class="line">boundary_date = datetime.datetime.utcnow() - datetime.timedelta(months=<span class="number">3</span>)</span><br><span class="line">metas = forum.get_metas(</span><br><span class="line">            num=forums.infinite_page, timebound=boundary_date.isoformat())</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h4 id="Forums_full_code"><a href="#Forums_full_code" class="headerlink" title="Forums full code"></a>Forums full code</h4><p>é€™é‚Šé™„ä¸Š <code>dcard/forums.py</code> éƒ¨åˆ†å¯¦ä½œç¨‹å¼ç¢¼ä»¥åŠè§£èªªã€‚</p>
<ul>
<li>ä¸€äº›å¸¸æ•¸å®šç¾©<ul>
<li><code>metas_per_page</code> æ˜¯ <code>Dcard</code> API çš„ spec</li>
<li>å¦å¤–é æ•¸éƒ½æ‡‰è©²æ˜¯å¤§æ–¼ç­‰æ–¼é›¶çš„æ•´æ•¸ï¼Œæ‰€ä»¥å°‡ <code>infinite_page</code> æ¨¡å¼å®šç‚ºå¸¸æ•¸ -1</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""" forums.py """</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Forum</span>:</span></span><br><span class="line">    metas_per_page = <span class="number">30</span></span><br><span class="line">    infinite_page = -<span class="number">1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é€™é‚Šå¯ä»¥çœ‹åˆ°å„é …åƒæ•¸çš„å¯¦éš›ä½¿ç”¨ç‹€æ³ï¼›å°¤å…¶æ˜¯ <code>callback</code> åƒæ•¸å¯¦éš›åœ¨ package è£¡çš„ä½¿ç”¨æ™‚æ©Ÿã€‚<br>ä¹Ÿå°±æ˜¯åœ¨å›å‚³çµæœä¹‹å‰ï¼Œå¦‚æœæœ‰å®šç¾© <code>callback</code> çš„è©±å°±å…ˆå‘¼å«ä¸¦å°‡ <code>callback</code>çš„çµæœä½œç‚ºæœ€çµ‚ <code>results</code> (@<code>Line#8</code>)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_metas</span><span class="params">(self, num=<span class="number">30</span>, sort=<span class="string">'new'</span>, before=None, timebound=None, callback=None)</span>:</span></span><br><span class="line">    logger.info(<span class="string">'&lt;%s&gt; é–‹å§‹å–å¾—çœ‹æ¿å…§æ–‡ç« è³‡è¨Š'</span>, self.name)</span><br><span class="line"></span><br><span class="line">    paged_metas = self.get_paged_metas(sort, num, before, timebound)</span><br><span class="line">    buff = flatten_lists(metas <span class="keyword">for</span> metas <span class="keyword">in</span> paged_metas)</span><br><span class="line"></span><br><span class="line">    results = callback(buff) <span class="keyword">if</span> callback <span class="keyword">else</span> buff</span><br><span class="line"></span><br><span class="line">    logger.info(<span class="string">'&lt;%s&gt; è³‡è¨Šè’é›†å®Œæˆï¼Œå…±%dç­†'</span>, self.name, len(buff))</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure>
<ul>
<li>é€™å€‹æ˜¯ <code>get_meta()</code> å¯¦éš›è² è²¬å„é …åˆ¤æ–·åŠè™•ç† API è³‡æ–™å›å‚³å›ä¾†çš„å¯¦éš› <code>generator</code>ã€‚<br>å…¶ä¸­æœ‰å¹¾å€‹å…§éƒ¨çš„ inner method:<ul>
<li><code>eager_for_metas()</code> + <code>get_single_page_metas()</code>: å‰è€…æ±ºå®šæ˜¯å¦è¦ç¹¼çºŒè¦è³‡æ–™ï¼Œå¾Œè€…æ˜¯è² è²¬é€å‡ºè«‹æ±‚çš„ generatorã€‚</li>
<li><code>filter_metas()</code>: éæ¿¾ä¸¦åƒ…ä¿ç•™éœ€è¦çš„è³‡æ–™ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_paged_metas</span><span class="params">(self, sort, num, before, timebound=<span class="string">''</span>)</span>:</span></span><br><span class="line">    params = &#123;<span class="string">'popular'</span>: sort == <span class="string">'popular'</span>, <span class="string">'before'</span>: before&#125;</span><br><span class="line">    pages = -(-num // self.metas_per_page)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">filter_metas</span><span class="params">(metas)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> num &gt;= <span class="number">0</span> <span class="keyword">and</span> page == pages:</span><br><span class="line">            metas = metas[:num - (pages - <span class="number">1</span>) * self.metas_per_page]</span><br><span class="line">        <span class="keyword">if</span> timebound:</span><br><span class="line">            metas = [m <span class="keyword">for</span> m <span class="keyword">in</span> metas <span class="keyword">if</span> m[<span class="string">'updatedAt'</span>] &gt; timebound]</span><br><span class="line">        <span class="keyword">return</span> metas</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eager_for_metas</span><span class="params">(bundle)</span>:</span></span><br><span class="line">        page, metas = bundle</span><br><span class="line">        <span class="keyword">if</span> num &gt;= <span class="number">0</span> <span class="keyword">and</span> page == pages + <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">        <span class="keyword">if</span> len(metas) == <span class="number">0</span>:</span><br><span class="line">            logger.warning(<span class="string">'[%s] å·²åˆ°æœ€æœ«é ï¼Œç¬¬%dé !'</span>, self.name, page)</span><br><span class="line">        <span class="keyword">return</span> len(metas) != <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_single_page_metas</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">            <span class="keyword">yield</span> self.client.get_json(self.posts_meta_url, params=params)</span><br><span class="line"></span><br><span class="line">    paged_metas = zip(count(start=<span class="number">1</span>), get_single_page_metas())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> page, metas <span class="keyword">in</span> takewhile(eager_for_metas, paged_metas):</span><br><span class="line">        params[<span class="string">'before'</span>] = metas[-<span class="number">1</span>][<span class="string">'id'</span>]</span><br><span class="line">        metas = filter_metas(metas)</span><br><span class="line">        <span class="keyword">if</span> len(metas) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">yield</span> metas</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå°±æ˜¯è² è²¬è™•ç† <code>çœ‹æ¿ (Forums)</code> çš„ moduleã€‚</p>
<h3 id="u6587_u7AE0_u5167_u5BB9_u76F8_u95DC_u8CC7_u8A0A__28Post-layer_29"><a href="#u6587_u7AE0_u5167_u5BB9_u76F8_u95DC_u8CC7_u8A0A__28Post-layer_29" class="headerlink" title="æ–‡ç« å…§å®¹ç›¸é—œè³‡è¨Š (Post-layer)"></a>æ–‡ç« å…§å®¹ç›¸é—œè³‡è¨Š (Post-layer)</h3><ul>
<li><p>åœ¨ <code>Posts</code> ä¸­ä¸»åªæœ‰ä¸€å€‹å°å¤–ï¼ˆä½œç‚ºå¥—ä»¶æä¾›çµ¦å¤–éƒ¨å‘¼å«ï¼‰çš„æ–¹æ³•</p>
<ul>
<li><p>ä¸éä¸¦ä¸æ˜¯ç›´æ¥å‘¼å«ä½¿ç”¨ï¼Œä½¿ç”¨å‰å…ˆå¡«å…¥åƒæ•¸ï¼Œå¯ä»¥è‡ªå‹•åˆ¤åˆ¥å…©ç¨®æä¾›çš„è³‡è¨Š (<code>meta</code> æˆ– <code>id</code>) ä¾†å–å¾—æ–‡ç« å…§å®¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""" list of metas """</span></span><br><span class="line">metas = dcard.forum(<span class="string">'whysoserious'</span>).get()</span><br><span class="line"></span><br><span class="line"><span class="string">""" list of ids """</span></span><br><span class="line">ids = [meta[<span class="string">'id'</span>] <span class="keyword">for</span> meta <span class="keyword">in</span> metas]</span><br><span class="line"></span><br><span class="line">articles = dcard.posts(metas)</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">articles = dcard.posts(ids)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li><p><code>get(self, content=True, links=True, comments=True)</code>:</p>
<ul>
<li>ç”¨ä¾†å–å¾—æ–‡ç« è³‡æ–™ï¼Œè€Œä¸‰é …åƒæ•¸åˆ†åˆ¥ä»£è¡¨æ˜¯å¦è¦å–å¾—æ–‡ç« å…§å®¹ã€å¼•ç”¨é€£çµå’Œè©²ç¯‡æ–‡ç« çš„ç•™è¨€ã€‚</li>
<li><p>å…¶å¯¦ä½œåº•ä¸‹åˆåˆ†ç‚ºä¸‰å€‹éƒ¨åˆ†: <code>get_content</code>, <code>get_links</code>, <code>get_comments</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_content</span><span class="params">(self, post_ids)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        self.client.get(api.post_url_pattern.format(post_id=post_id))</span><br><span class="line">        <span class="keyword">for</span> post_id <span class="keyword">in</span> post_ids</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_links</span><span class="params">(self, post_ids)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        self.client.get(api.post_links_url_pattern.format(post_id=post_id))</span><br><span class="line">        <span class="keyword">for</span> post_id <span class="keyword">in</span> post_ids</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_comments</span><span class="params">(self, post_ids, post_metas)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        self.get_comments_parallel(meta[<span class="string">'id'</span>], meta[<span class="string">'commentCount'</span>])</span><br><span class="line">        <span class="keyword">for</span> meta <span class="keyword">in</span> post_metas</span><br><span class="line">    ) <span class="keyword">if</span> post_metas <span class="keyword">else</span> (</span><br><span class="line">        self.get_comments_serial(post_id)</span><br><span class="line">        <span class="keyword">for</span> post_id <span class="keyword">in</span> post_ids</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>get_content</code>, <code>get_links</code> å¾ˆå®¹æ˜“åšåˆ°å¹³è¡ŒåŒ– (parallel) æˆ–ä¸¦è¡Œ (concurrent) åŸ·è¡Œä¾†åŠ å¿«å–å¾—å¤§é‡æ–‡ç« çš„æ•ˆç‡ (throughput)ã€‚</p>
</li>
<li><p>æ¯”è¼ƒéº»ç…©çš„æ˜¯ <code>get_comments</code>ï¼Œå› ç‚ºå‰é¢æåˆ° <code>Posts</code> èƒ½åŒæ™‚åƒ <code>metas</code> å’Œ <code>ids</code> å…©ç¨®åƒæ•¸ï¼Œæ‰€ä»¥åœ¨å–å¾—ç•™è¨€ä¸Šåˆ†å…©ç¨®ç­–ç•¥ï¼š</p>
<ul>
<li>æä¾› <code>id</code> çš„æƒ…æ³ï¼šå°å¤šç¯‡åˆ†åˆ¥å¾ªåºå–å¾—æ–‡ç« ç•™è¨€ (<code>get_comments_serial</code>)</li>
<li>æä¾› <code>meta</code> çš„æƒ…æ³ï¼šå°å¤šç¯‡åˆ†åˆ¥ä¸¦è¡Œå–å¾—æ–‡ç« ç•™è¨€ (<code>get_comments_parallel</code>)<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_comments_serial</span><span class="params">(self, post_id)</span>:</span></span><br><span class="line">    comments_url = api.post_comments_url_pattern.format(post_id=post_id)</span><br><span class="line">    params = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">gen_cmts</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">            <span class="keyword">yield</span> self.client.get_json(comments_url, params=params)</span><br><span class="line"></span><br><span class="line">    comments = []</span><br><span class="line">    <span class="keyword">for</span> cmts <span class="keyword">in</span> takewhile(<span class="keyword">lambda</span> x: len(x), gen_cmts()):</span><br><span class="line">        comments += cmts</span><br><span class="line">        params[<span class="string">'after'</span>] = cmts[-<span class="number">1</span>][<span class="string">'floor'</span>]</span><br><span class="line">    <span class="keyword">return</span> comments</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_comments_parallel</span><span class="params">(self, post_id, comments_count)</span>:</span></span><br><span class="line">    pages = -(-comments_count // self.comments_per_page)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        self.client.get(</span><br><span class="line">            api.post_comments_url_pattern.format(post_id=post_id),</span><br><span class="line">            params=&#123;<span class="string">'after'</span>: page * self.comments_per_page&#125;)</span><br><span class="line">        <span class="keyword">for</span> page <span class="keyword">in</span> range(pages)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>è€Œ <code>dcard.posts(metas).get()</code> å›å‚³çš„æ˜¯ä¸€å€‹ <code>generator</code>ï¼Œè£¡é¢çš„è³‡è¨Šçµæ§‹é•·é€™æ¨£å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> article <span class="keyword">in</span> dcard.posts(metas).get():</span><br><span class="line">    print(artile)</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    "<span class="attribute">comments</span>": <span class="value">[</span><br><span class="line">    &#123;</span><br><span class="line">        "<span class="attribute">reportReason</span>": <span class="value"><span class="string">""</span></span>,</span><br><span class="line">        "<span class="attribute">school</span>": <span class="value"><span class="string">"é€¢ç”²å¤§å­¸"</span></span>,</span><br><span class="line">        "<span class="attribute">createdAt</span>": <span class="value"><span class="string">"2016-07-15T11:06:29.029Z"</span></span>,</span><br><span class="line">        "<span class="attribute">hidden</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">        "<span class="attribute">anonymous</span>": <span class="value"><span class="literal">true</span></span>,</span><br><span class="line">        "<span class="attribute">floor</span>": <span class="value"><span class="number">1</span></span>,</span><br><span class="line">        "<span class="attribute">updatedAt</span>": <span class="value"><span class="string">"2016-07-15T11:06:29.029Z"</span></span>,</span><br><span class="line">        "<span class="attribute">postId</span>": <span class="value"><span class="number">224362498</span></span>,</span><br><span class="line">        "<span class="attribute">likeCount</span>": <span class="value"><span class="number">0</span></span>,</span><br><span class="line">        "<span class="attribute">id</span>": <span class="value"><span class="string">"587c62b2-70be-4469-8f3a-641705606e54"</span></span>,</span><br><span class="line">        "<span class="attribute">host</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">        "<span class="attribute">content</span>": <span class="value"><span class="string">"ä½ éŒ¯äº†ï¼Œè‡‰å¾ˆé‡è¦ã€‚"</span></span>,</span><br><span class="line">        "<span class="attribute">gender</span>": <span class="value"><span class="string">"M"</span></span><br><span class="line">    </span>&#125;</span><br><span class="line">    ]</span>,</span><br><span class="line">    "<span class="attribute">links</span>": <span class="value">&#123;&#125;</span>,</span><br><span class="line">    "<span class="attribute">content</span>": <span class="value">&#123;</span><br><span class="line">        "<span class="attribute">tags</span>": <span class="value">[<span class="string">"å¡å‹"</span>,ã€€<span class="string">"ç•«ç´ "</span>,ã€€<span class="string">"ç™¾è¬"</span>,ã€€<span class="string">"å¹¾åè¬"</span>,ã€€<span class="string">"åŠ æ²¹å§"</span>]</span>,</span><br><span class="line">        "<span class="attribute">title</span>": <span class="value"><span class="string">"åŠ æ²¹å§ï¼å¡å‹å€‘"</span></span>,</span><br><span class="line">        "<span class="attribute">forumName</span>": <span class="value"><span class="string">"æœ‰è¶£"</span></span>,</span><br><span class="line">        "<span class="attribute">anonymousSchool</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">        "<span class="attribute">forumAlias</span>": <span class="value"><span class="string">"funny"</span></span>,</span><br><span class="line">        "<span class="attribute">createdAt</span>": <span class="value"><span class="string">"2016-07-15T11:04:12.795Z"</span></span>,</span><br><span class="line">        "<span class="attribute">replyTitle</span>": <span class="value"><span class="literal">null</span></span>,</span><br><span class="line">        "<span class="attribute">school</span>": <span class="value"><span class="string">"å‹¤ç›Šç§‘å¤§"</span></span>,</span><br><span class="line">        "<span class="attribute">content</span>": <span class="value"><span class="string">"å›æƒ³é€™å¹¾å¹´ï¼Œæˆ‘åšç›¡ç¤¾æœƒçš„è¾›é…¸è‰±é›£\nå¾ä¸€é–‹å§‹\nä»€éº¼éƒ½æ²’æœ‰åˆ°äº†å¹¾åè¬\nå†å¾å¹¾åè¬åˆ°ç™¾è¬\nç™¾è¬å†åˆ°åƒè¬\næœ€å¾Œåƒè¬åˆ°ç¾åœ¨çš„2100è¬\næˆ‘ä¸æ˜¯è¦ç‚«è€€\nåªæ˜¯æƒ³é€éè‡ªå·±çš„ç¶“æ­·å‘Šè¨´å¤§å®¶\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\næ‰‹æ©Ÿç•«ç´ è¶Šé«˜ï¼Œç…§ç‰‡è¶Šå¥½çœ‹ğŸ˜ğŸ˜ğŸ˜"</span></span>,</span><br><span class="line">        "<span class="attribute">commentCount</span>": <span class="value"><span class="number">1</span></span>,</span><br><span class="line">        "<span class="attribute">updatedAt</span>": <span class="value"><span class="string">"2016-07-15T11:06:45.664Z"</span></span>,</span><br><span class="line">        "<span class="attribute">forumId</span>": <span class="value"><span class="string">"a1aaa6e6-2594-4968-b7dc-e1b14bea96f4"</span></span>,</span><br><span class="line">        "<span class="attribute">likeCount</span>": <span class="value"><span class="number">2</span></span>,</span><br><span class="line">        "<span class="attribute">excerpt</span>": <span class="value"><span class="string">"å›æƒ³é€™å¹¾å¹´ï¼Œæˆ‘åšç›¡ç¤¾æœƒçš„è¾›é…¸è‰±é›£\nå¾ä¸€é–‹å§‹\nä»€éº¼éƒ½æ²’æœ‰åˆ°äº†å¹¾åè¬\nå†å¾å¹¾åè¬åˆ°ç™¾è¬\nç™¾è¬å†åˆ°åƒè¬\næœ€å¾Œåƒè¬åˆ°ç¾åœ¨çš„2100è¬\næˆ‘ä¸æ˜¯è¦ç‚«è€€\nåªæ˜¯æƒ³é€éè‡ªå·±çš„ç¶“æ­·å‘Šè¨´å¤§å®¶\n.\n.\n.\n.\n.\n.\n.\n."</span></span>,</span><br><span class="line">        "<span class="attribute">id</span>": <span class="value"><span class="number">224362498</span></span>,</span><br><span class="line">        "<span class="attribute">anonymousDepartment</span>": <span class="value"><span class="literal">true</span></span>,</span><br><span class="line">        "<span class="attribute">pinned</span>": <span class="value"><span class="literal">false</span></span>,</span><br><span class="line">        "<span class="attribute">replyId</span>": <span class="value"><span class="literal">null</span></span>,</span><br><span class="line">        "<span class="attribute">gender</span>": <span class="value"><span class="string">"M"</span></span>,</span><br><span class="line">        "<span class="attribute">deletedAt</span>": <span class="value"><span class="literal">null</span></span><br><span class="line">    </span>&#125;</span><br><span class="line"></span>&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<p>ä»¥ä¸Šå°±æ˜¯è² è²¬è™•ç† æ–‡ç«  (Posts) çš„ moduleã€‚</p>
<h3 id="u4F7F_u7528_u7BC4_u4F8B"><a href="#u4F7F_u7528_u7BC4_u4F8B" class="headerlink" title="ä½¿ç”¨ç¯„ä¾‹"></a>ä½¿ç”¨ç¯„ä¾‹</h3><p>èªªé‚£éº¼å¤šï¼Œä¸å¦‚å¯¦éš›çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ã€‚</p>
<ul>
<li>ç¯„ä¾‹æƒ…å¢ƒ 1: æƒ³è¦çœ‹çœ‹æœ‰è¶£ç‰ˆä¸€å¤©è£¡å¤ ç†±é–€ (likes æ•¸å¤šæ–¼ 100) çš„æ–‡ç« è£¡ï¼Œç•™è¨€çš„éƒ½æ˜¯ä»€éº¼å­¸æ ¡çš„äººã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="keyword">from</span> dcard <span class="keyword">import</span> Dcard</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dcard = Dcard()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨ä¾†å­˜æ”¾æƒ³å¾—åˆ°çš„è³‡è¨Š =&gt; &#123;'æŸæŸå­¸æ ¡': $&#123;å¤šå°‘ç•™è¨€æ•¸&#125;, ...&#125;</span></span><br><span class="line">analyzed_result = defaultdict(<span class="keyword">lambda</span>: <span class="number">0</span>)</span><br><span class="line"><span class="comment"># å¿…é ˆä½¿ç”¨ UTC æ™‚é–“ï¼Œç„¶å¾Œè¨‚å®šæœå°‹ç¯„åœæ˜¯ä¸€å¤©å…§</span></span><br><span class="line">target_date = datetime.datetime.utcnow() - datetime.timedelta(days=<span class="number">1</span>) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filter_hot</span><span class="params">(metas)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> [meta <span class="keyword">for</span> meta <span class="keyword">in</span> metas <span class="keyword">if</span> meta[<span class="string">'likeCount'</span>] &gt;= <span class="number">100</span>]</span><br><span class="line"></span><br><span class="line">metas = dcard.forums(<span class="string">'funny'</span>).get_metas(</span><br><span class="line">            num=dcard.forums.infinite_page,  <span class="comment"># å› ç‚ºæ²’æœ‰æ˜ç¢ºæ•¸é‡ç›®æ¨™ (ç”±æ™‚é–“åšç‚ºé™åˆ¶æ¢ä»¶)ï¼Œæ­¤é …è¨­ç‚ºç„¡é™å¤§</span></span><br><span class="line">            timebound=target_date.isoformat(),  <span class="comment"># å¿…é ˆå°‡æ™‚é–“è½‰æˆ ISO-8601 åˆ¶çš„æ™‚é–“å­—ä¸²</span></span><br><span class="line">            callback=filter_hot  <span class="comment"># æ ¹æ“šæ¢ä»¶å¯«å€‹éæ¿¾å™¨</span></span><br><span class="line">        )</span><br><span class="line">print(<span class="string">'Collect %d metas'</span> % len(metas))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å› ç‚ºé€™è£¡æˆ‘å€‘åªé—œæ³¨ç•™è¨€è³‡è¨Šï¼Œå…¶ä»–å…©å€‹è³‡è¨Šå¯ä»¥ç•¥é</span></span><br><span class="line">articles = dcard.posts(metas).get(content=<span class="keyword">False</span>, links=<span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†æ</span></span><br><span class="line"><span class="keyword">for</span> article <span class="keyword">in</span> articles.result():</span><br><span class="line">    <span class="keyword">for</span> comment <span class="keyword">in</span> article[<span class="string">'comments'</span>]:</span><br><span class="line">        analyzed_result[comment.get(<span class="string">'school'</span>)] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">print(analyzed_result)</span><br></pre></td></tr></table></figure>
<ul>
<li>çµæœå¯èƒ½é•·å¾—åƒé€™æ¨£ï¼Œ</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Collect <span class="number">355</span> metas</span><br><span class="line"></span><br><span class="line">defaultdict(&lt;function &lt;<span class="keyword">lambda</span>&gt; at <span class="number">0x0</span>xxxxxxxxxxxxxxx&gt;, &#123;</span><br><span class="line">    <span class="string">'é‡‘é–€å¤§å­¸'</span>: <span class="number">35</span>, <span class="string">'æ±æµ·å¤§å­¸'</span>: <span class="number">71</span>, <span class="string">'åœ‹ç«‹æˆåŠŸå¤§å­¸'</span>: <span class="number">4</span>, <span class="string">'å¤§åŒå¤§å­¸'</span>: <span class="number">9</span>, <span class="string">'ç„å¥˜å¤§å­¸'</span>: <span class="number">29</span>,</span><br><span class="line">    <span class="string">'è–ç´„ç¿°ç§‘æŠ€å¤§å­¸'</span>: <span class="number">3</span>, <span class="string">'åœ‹ç«‹é«˜é›„æ‡‰ç”¨ç§‘æŠ€å¤§å­¸'</span>: <span class="number">3</span>, <span class="string">'æ¸…è¯å¤§å­¸'</span>: <span class="number">8</span>, <span class="string">'åœ‹ç«‹è‡ºåŒ—ç§‘æŠ€å¤§å­¸'</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">'åœ‹ç«‹é«˜é›„å¸«ç¯„å¤§å­¸'</span>: <span class="number">3</span>, <span class="string">'åœ‹ç«‹è‡ºç£è—è¡“å¤§å­¸'</span>: <span class="number">10</span>, ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>åŒæ¨£çš„æ‡‰ç”¨ï¼Œæˆ–è¨±ä¹Ÿå¯ä»¥åˆ° whysoserious çœ‹çœ‹å“ªå€‹å­¸æ ¡æœ€æ„›ç™¼è²»é›¯ XDD</p>
<ul>
<li>ç¯„ä¾‹æƒ…å¢ƒ 2: æƒ³æŠ“æ”å½±ç‰ˆä¸Šæœ€è¿‘ç™¾ç¯‡ä¸” likes å¤ é«˜æ–‡ç« å…§æ–‡è£¡çš„â€åœ–ç‰‡â€å€‘ï¼</li>
</ul>
<p><strong>ç¨‹å¼ä½œæ³•</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dcard <span class="keyword">import</span> Dcard</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filter_hot</span><span class="params">(metas)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> [meta <span class="keyword">for</span> meta <span class="keyword">in</span> metas <span class="keyword">if</span> meta[<span class="string">'likeCount'</span>] &gt;= <span class="number">100</span>]</span><br><span class="line"></span><br><span class="line">dcard = Dcard()</span><br><span class="line"><span class="comment"># å…ˆæŠ“ç™¾ç¯‡ meta å‡ºä¾†ï¼Œç„¶å¾Œéæ¿¾å‡ºç†±é–€çš„</span></span><br><span class="line">metas = dcard.forums(<span class="string">'photography'</span>).get_metas(num=<span class="number">100</span>, callback=filter_hot)</span><br><span class="line"><span class="comment"># å› ç‚ºåªæƒ³è¦åˆ†æå…§æ–‡è£¡çš„åœ–ç‰‡ è‹¥æ˜¯é€£ç•™è¨€å›å¾©çš„åœ–éƒ½è¦æ†¶èµ·åˆ†æï¼Œé‚£å°±å°‡ comments=False æ‹¿æ‰</span></span><br><span class="line">posts = dcard.posts(metas).get(comments=<span class="keyword">False</span>, links=<span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line">resources = posts.parse_resources()  <span class="comment"># é–‹å§‹åˆ†ææ–‡ç« å…§çš„åœ–ç‰‡</span></span><br><span class="line">fin, fails = posts.download(resources)  <span class="comment"># ä¸‹è¼‰åˆ†æå‡ºä¾†çš„åœ–ç‰‡</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'æˆåŠŸä¸‹è¼‰ %d é …ï¼'</span> % fin <span class="keyword">if</span> len(fails) == <span class="number">0</span> <span class="keyword">else</span> <span class="string">'å‡ºäº†é»éŒ¯ä¸‹è¼‰ä¸å®Œå…¨å–”'</span>)</span><br></pre></td></tr></table></figure>
<p><strong>æŒ‡ä»¤åšæ³•</strong></p>
<p>æœ¬ package æä¾› <code>command-line</code> å¼ä½¿ç”¨æ–¹æ³•å”·~ æ–¹ä¾¿åˆç°¡å–®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dcard download <span class="operator">-f</span> photography -n <span class="number">100</span> -likes <span class="number">100</span></span><br></pre></td></tr></table></figure>
<ul>
<li>çµæœï¼š</li>
</ul>
<img src="/2016/dcard-spider-python-package/snapshot.png" alt="åŸ·è¡Œæˆæœ" title="åŸ·è¡Œæˆæœ">
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘çš„ dcard-spider æ¶æ§‹åˆ†äº«ã€‚è‹¥æœ‰ç™¼ç¾ bugs æˆ– åŠŸèƒ½å»ºè­°æ­¡è¿è‡³ Github issues ç•™è¨€~</p>
<p>Salas / 2016.08</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://levirve.github.io/2016/dcard-spider-python-package/" data-id="cirwzbmnj000omgwrysbipmbg" class="article-share-link">Share</a>
      
        <a href="https://levirve.github.io/2016/dcard-spider-python-package/#disqus_thread" class="article-comment-link">ç•™è¨€</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spider/">Spider</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/hexo-start/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          ä½ å¥½ï¼Œé€™æ˜¯æˆ‘çš„åç‰‡
        
      </div>
    </a>
  
  
    <a href="/2016/Dccard-crawler/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Dccard çˆ¬èŸ²ï¼Œé€éå®˜æ–¹API</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">åˆ†é¡</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ¨™ç±¤</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hello/">Hello</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spider/">Spider</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/çˆ¬èŸ²/">çˆ¬èŸ²</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/é–‹ç®±æ–‡/">é–‹ç®±æ–‡</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ¨™ç±¤é›²</h3>
    <div class="widget tagcloud">
      <a href="/tags/Hello/" style="font-size: 15px;">Hello</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/Python/" style="font-size: 20px;">Python</a> <a href="/tags/Spider/" style="font-size: 15px;">Spider</a> <a href="/tags/çˆ¬èŸ²/" style="font-size: 10px;">çˆ¬èŸ²</a> <a href="/tags/é–‹ç®±æ–‡/" style="font-size: 15px;">é–‹ç®±æ–‡</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½™æ•´</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">å…«æœˆ 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">ä¸ƒæœˆ 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">äºŒæœˆ 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">åäºŒæœˆ 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">ä¸ƒæœˆ 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/hexo-start/">ä½ å¥½ï¼Œé€™æ˜¯æˆ‘çš„åç‰‡</a>
          </li>
        
          <li>
            <a href="/2016/dcard-spider-python-package/">Dcard çˆ¬èŸ²æ–¼ Python å¯¦ä½œæˆæœï¼šdcard-spider</a>
          </li>
        
          <li>
            <a href="/2016/Dccard-crawler/">Dccard çˆ¬èŸ²ï¼Œé€éå®˜æ–¹API</a>
          </li>
        
          <li>
            <a href="/2016/çˆ¬èŸ²/">ç¶²è·¯çˆ¬èŸ² Crawler Tutorial - (1) ç°¡ä»‹</a>
          </li>
        
          <li>
            <a href="/2015/hello-world/">ä½ å¥½ï¼Œæˆ‘æ˜¯â€¦</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Salas (leVirve)<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'salasnote';
  
  var disqus_url = 'https://levirve.github.io/2016/dcard-spider-python-package/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>




  </div>
</body>
</html>